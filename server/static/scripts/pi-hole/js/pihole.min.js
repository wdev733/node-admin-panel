/*! pi1 - v1.0.0 -  2017 - 01 - 25  */
!function(a,b,c){"use strict";if("undefined"==typeof d){var d={};const e={enable:function(){},disable:function(){}};d.api={},d.api.data={get:function(a,c,d){b.ajax({url:"/api/data",method:"get",data:a,success:c,error:d})}},d.api.list={get:function(a,c,d){b.ajax({url:"/api/list",method:"get",data:{list:a},success:c,error:d})},post:function(a,c,e,f){b.ajax({url:"api/list",method:"post",data:{domain:c,list:a,token:d.helper.getApiToken()},success:e,error:f})},delete:function(a,c,e,f){b.ajax({url:"api/list",method:"delete",data:{domain:c,list:a,token:d.helper.getApiToken()},success:e,error:f})}},d.api.taillog=function(){const a=["dns"];var b,c={dns:[],error:[],open:[]},d=!1;const e=function(a,b){c[a].forEach(function(a){a(JSON.parse(b.data))})},f=function(a){d=!1,e("error",a)},g=function(a){e("dns",a)},h=function(a){},i=function(){d=!0,e("open")};var j={};return j.on=function(b,d){return a.indexOf(b)>=0&&c[b].push(d),function(){j.off(d)}},j.off=function(b,d){if(a.indexOf(b)>=0){const e=c[b].indexOf(d);e!==-1&&delete c[b][e]}},j.listen=function(){d||(d=!0,b=new EventSource("/api/taillog",{withcredentials:!0}),b.onerror=f,b.onmessage=h,b.addEventListener("dns",g,!1),b.onopen=i)},j}(),d.helper=function(){var a,d={};return d.getApiToken=function(){return a===c&&(a=b("#token").html()),a},d}(),d.settings=e,a.pihole=d}}(window,$);